{% extends 'base.html' %}
{% block title %}HiveMind - 解鎖分散式運算的力量{% endblock %}
{% block content %}

<!-- Header - Hero Section -->
<header class="bg-dark py-5 position-relative overflow-hidden">
    <!-- 動畫背景元素 -->
    <div class="position-absolute top-0 start-0 w-100 h-100">
        <div class="floating-particles"></div>
    </div>
    <div class="container px-5 position-relative">
        <div class="row gx-5 align-items-center justify-content-center">
            <div class="col-lg-12">
                <div class="my-5 text-center hero-content">
                    <h1 class="display-5 fw-bolder text-white mb-2 slide-in-left" data-i18n="welcome">解鎖分散式運算的力量</h1>
                    <p class="lead fw-normal text-white-50 mb-4 slide-in-left delay-200" data-i18n="subtitle">工作端 + 節點池，打造高效能分布式平台，讓你專注開發、我們處理執行。</p>
                    <div class="d-grid gap-3 d-sm-flex justify-content-center slide-in-left delay-400">
                        <a class="btn btn-primary btn-lg px-4 me-sm-3 btn-hover-glow" href="/register" data-i18n="register_now">立即註冊</a>
                        <a class="btn btn-outline-light btn-lg px-4 btn-hover-lift" href="#" id="hero-docs-link" data-i18n="view_docs">查看文檔</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- 系統資源統計區塊 -->
<section class="py-5 bg-primary">
    <div class="container px-5">
        <div class="text-center mb-4">
            <h3 class="fw-bolder text-white mb-2" data-i18n="system_resources">系統資源</h3>
            <p class="text-white-50" data-i18n="resource_subtitle">我們的分布式網路提供強大的運算資源</p>
        </div>
        <div class="row gx-5 text-center text-white">
            <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                <div class="stat-item fade-in-up">
                    <div class="h2 fw-bolder mb-0"><span class="counter" data-target="1000">0</span>+GB</div>
                    <p class="mb-0" data-i18n="total_ram">總記憶體</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                <div class="stat-item fade-in-up delay-100">
                    <div class="h2 fw-bolder mb-0"><span class="counter" data-target="500">0</span>+GB</div>
                    <p class="mb-0" data-i18n="total_vram">顯示記憶體</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                <div class="stat-item fade-in-up delay-200">
                    <div class="h2 fw-bolder mb-0"><span class="counter" data-target="700">0</span>+</div>
                    <p class="mb-0" data-i18n="cpu_cores">CPU 核心</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-item fade-in-up delay-300">
                    <div class="h2 fw-bolder mb-0"><span class="counter" data-target="99">0</span>%</div>
                    <p class="mb-0" data-i18n="uptime">可用時間</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features section -->
<section class="py-5" id="features">
    <div class="container px-5 my-5">
        <div class="row gx-5">
            <div class="col-lg-4 mb-5 mb-lg-0">
                <div class="feature-intro slide-in-left">
                    <h2 class="fw-bolder mb-3" data-i18n="better_computing_experience">打造更好的運算體驗</h2>
                    <p class="text-muted" data-i18n="features_intro">我們提供全方位的分布式運算解決方案，讓您的專案擁有無限可能。</p>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="row gx-5 row-cols-1 row-cols-md-2">
                    <div class="col mb-5 h-100">
                        <div class="feature-card hover-lift">
                            <div class="feature bg-gradient text-white rounded-3 mb-3 pulse-glow">
                                <i class="fas fa-cubes"></i>
                            </div>
                            <h2 class="h5" data-i18n="feature1_title">模組化架構</h2>
                            <p class="mb-0 text-muted" data-i18n="feature1_desc">將工作拆解為可分配的子任務，自由擴展你的運算能力。</p>
                        </div>
                    </div>
                    <div class="col mb-5 h-100">
                        <div class="feature-card hover-lift delay-100">
                            <div class="feature bg-gradient text-white rounded-3 mb-3 pulse-glow">
                                <i class="fas fa-network-wired"></i>
                            </div>
                            <h2 class="h5" data-i18n="feature2_title">即時節點分配</h2>
                            <p class="mb-0 text-muted" data-i18n="feature2_desc">節點池自動分配最合適的節點，支援自定義任務標準。</p>
                        </div>
                    </div>
                    <div class="col mb-5 mb-md-0 h-100">
                        <div class="feature-card hover-lift delay-200">
                            <div class="feature bg-gradient text-white rounded-3 mb-3 pulse-glow">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h2 class="h5" data-i18n="feature3_title">安全與隔離</h2>
                            <p class="mb-0 text-muted" data-i18n="feature3_desc">任務在 Docker 容器中執行，保證節點之間彼此獨立、安全。</p>
                        </div>
                    </div>
                    <div class="col h-100">
                        <div class="feature-card hover-lift delay-300">
                            <div class="feature bg-gradient text-white rounded-3 mb-3 pulse-glow">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <h2 class="h5" data-i18n="high_performance_title">高性能處理</h2>
                            <p class="mb-0 text-muted" data-i18n="high_performance_desc">充分利用分布式架構，提供前所未有的運算效能和可擴展性。</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 工作流程說明 -->
<section class="py-5 bg-light">
    <div class="container px-5 my-5">
        <div class="text-center mb-5">
            <h2 class="fw-bolder mb-3" data-i18n="how_it_works">運作流程</h2>
            <p class="lead text-muted" data-i18n="workflow_intro">簡單三步驟，開始您的分布式運算之旅</p>
        </div>
        <div class="row gx-5">
            <div class="col-lg-4 mb-5 mb-lg-0">
                <div class="workflow-step text-center fade-in-up">
                    <div class="step-number mb-3">1</div>
                    <div class="step-icon mb-3">
                        <i class="fas fa-user-plus fa-2x text-primary"></i>
                    </div>
                    <h4 class="fw-bolder mb-3" data-i18n="step1_title">註冊帳戶</h4>
                    <p class="text-muted mb-3" data-i18n="step1_desc">創建您的 HiveMind 帳戶，開始享受分布式運算服務。</p>
                    <a href="/register" class="btn btn-outline-primary btn-sm" data-i18n="register_now">立即註冊</a>
                </div>
            </div>
            <div class="col-lg-4 mb-5 mb-lg-0">
                <div class="workflow-step text-center fade-in-up delay-100">
                    <div class="step-number mb-3">2</div>
                    <div class="step-icon mb-3">
                        <i class="fas fa-download fa-2x text-primary"></i>
                    </div>
                    <h4 class="fw-bolder mb-3" data-i18n="step2_title">下載客戶端</h4>
                    <p class="text-muted mb-3" data-i18n="step2_desc">選擇適合的客戶端版本，快速部署到您的環境中。</p>
                    <a href="/download" class="btn btn-outline-primary btn-sm" data-i18n="download_client">下載客戶端</a>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="workflow-step text-center fade-in-up delay-200">
                    <div class="step-number mb-3">3</div>
                    <div class="step-icon mb-3">
                        <i class="fas fa-book fa-2x text-primary"></i>
                    </div>
                    <h4 class="fw-bolder mb-3" data-i18n="step3_title">查看文檔</h4>
                    <p class="text-muted mb-3" data-i18n="step3_desc">閱讀完整的使用指南和 API 文檔，快速上手。</p>
                    <a href="#" class="btn btn-outline-primary btn-sm docs-link" data-i18n="view_docs">查看文檔</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 技術優勢 -->
<section class="py-5">
    <div class="container px-5 my-5">
        <div class="row gx-5 align-items-center">
            <div class="col-lg-6 mb-5 mb-lg-0">
                <div class="tech-advantages slide-in-left">
                    <h2 class="fw-bolder mb-4" data-i18n="tech_advantages">技術優勢</h2>
                    <div class="advantage-item mb-4">
                        <div class="d-flex align-items-start">
                            <div class="flex-shrink-0">
                                <div class="advantage-icon">
                                    <i class="fas fa-bolt text-primary"></i>
                                </div>
                            </div>
                            <div class="ms-3">
                                <h5 class="fw-bolder" data-i18n="advantage1_title">高效並行</h5>
                                <p class="text-muted mb-0" data-i18n="advantage1_desc">透過多節點並行處理，大幅提升運算效率。</p>
                            </div>
                        </div>
                    </div>
                    <div class="advantage-item mb-4">
                        <div class="d-flex align-items-start">
                            <div class="flex-shrink-0">
                                <div class="advantage-icon">
                                    <i class="fas fa-expand-arrows-alt text-primary"></i>
                                </div>
                            </div>
                            <div class="ms-3">
                                <h5 class="fw-bolder" data-i18n="advantage2_title">彈性擴展</h5>
                                <p class="text-muted mb-0" data-i18n="advantage2_desc">根據需求動態調整運算資源，靈活配置。</p>
                            </div>
                        </div>
                    </div>
                    <div class="advantage-item">
                        <div class="d-flex align-items-start">
                            <div class="flex-shrink-0">
                                <div class="advantage-icon">
                                    <i class="fas fa-lock text-primary"></i>
                                </div>
                            </div>
                            <div class="ms-3">
                                <h5 class="fw-bolder" data-i18n="advantage3_title">安全可靠</h5>
                                <p class="text-muted mb-0" data-i18n="advantage3_desc">採用安全標準，確保數據和運算過程的安全性。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="tech-visual slide-in-right">
                    <div class="performance-chart">
                        <div class="chart-title text-center mb-4">
                            <h5 class="fw-bolder" data-i18n="performance_comparison">效能對比</h5>
                        </div>
                        <div class="chart-bars">
                            <div class="bar-item mb-3">
                                <div class="bar-label" data-i18n="traditional_computing">傳統運算</div>
                                <div class="bar-container">
                                    <div class="bar bar-traditional" data-width="30"></div>
                                    <span class="bar-value">30%</span>
                                </div>
                            </div>
                            <div class="bar-item mb-3">
                                <div class="bar-label" data-i18n="cloud_computing">雲端運算</div>
                                <div class="bar-container">
                                    <div class="bar bar-cloud" data-width="65"></div>
                                    <span class="bar-value">65%</span>
                                </div>
                            </div>
                            <div class="bar-item">
                                <div class="bar-label" data-i18n="hivemind_computing">HiveMind</div>
                                <div class="bar-container">
                                    <div class="bar bar-hivemind" data-width="100"></div>
                                    <span class="bar-value">100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- About section -->
<section class="py-5 bg-light">
    <div class="container px-5 my-5">
        <div class="row gx-5 justify-content-center">
            <div class="col-lg-10 col-xl-8">
                <div class="text-center fade-in-up">
                    <h2 class="fw-bolder mb-4" data-i18n="about_title">關於我們</h2>
                    <p class="lead text-muted mb-4" data-i18n="about_desc">我們是一群相信「運算力應人人可用」的開發者，打造這套平台，目標是讓任何人都能輕鬆取得分散式資源，不再受限本機硬體。</p>
                    <div class="row gx-4 justify-content-center">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="team-value">
                                <div class="value-icon mb-3">
                                    <i class="fas fa-heart fa-2x text-primary"></i>
                                </div>
                                <h5 class="fw-bolder" data-i18n="value1_title">開放創新</h5>
                                <p class="text-muted small" data-i18n="value1_desc">擁抱開源精神，持續創新技術</p>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="team-value">
                                <div class="value-icon mb-3">
                                    <i class="fas fa-users fa-2x text-primary"></i>
                                </div>
                                <h5 class="fw-bolder" data-i18n="value2_title">社群驅動</h5>
                                <p class="text-muted small" data-i18n="value2_desc">以用戶需求為核心，共同成長</p>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="team-value">
                                <div class="value-icon mb-3">
                                    <i class="fas fa-globe fa-2x text-primary"></i>
                                </div>
                                <h5 class="fw-bolder" data-i18n="value3_title">全球視野</h5>
                                <p class="text-muted small" data-i18n="value3_desc">建設普惠的全球運算網路</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to action section -->
<section class="py-5 bg-gradient-primary text-white cta-section">
    <div class="container px-5 my-5">
        <div class="text-center">
            <h2 class="display-4 fw-bolder mb-4 slide-in-up" data-i18n="ready_to_start">準備開始了嗎？</h2>
            <p class="lead mb-4 slide-in-up delay-100" data-i18n="cta_subtitle">加入 HiveMind，體驗前所未有的分布式運算能力</p>
            <div class="slide-in-up delay-200">
                <a class="btn btn-outline-light btn-lg px-5 py-3 fs-6 fw-bolder btn-hover-glow me-3" href="/register" data-i18n="register_now">立即註冊</a>
                <a class="btn btn-light btn-lg px-5 py-3 fs-6 fw-bolder btn-hover-lift" href="/download" data-i18n="download_client">下載客戶端</a>
            </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block scripts %}
<script>
// 數字動畫計數器
function animateCounters() {
    const counters = document.querySelectorAll('.counter');
    const speed = 50; // 調整速度讓動畫更明顯
    
    counters.forEach(counter => {
        let startValue = 0;
        const endValue = +counter.getAttribute('data-target');
        const increment = endValue / speed;
        
        const animate = () => {
            startValue += increment;
            if (startValue < endValue) {
                counter.innerText = Math.ceil(startValue);
                requestAnimationFrame(animate);
            } else {
                counter.innerText = endValue;
            }
        }
        animate();
    });
}

// 性能圖表動畫
function animatePerformanceChart() {
    const bars = document.querySelectorAll('.bar');
    bars.forEach((bar, index) => {
        setTimeout(() => {
            const width = bar.getAttribute('data-width');
            bar.style.width = width + '%';
        }, index * 300);
    });
}

// 滾動動畫觀察器
const observerOptions = {
    threshold: 0.2,
    rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('animate');
            
            // 觸發計數器動畫
            if (entry.target.classList.contains('stat-item') || entry.target.querySelector('.counter')) {
                setTimeout(animateCounters, 200);
            }
            
            // 觸發圖表動畫
            if (entry.target.querySelector('.performance-chart')) {
                setTimeout(animatePerformanceChart, 500);
            }
            
            // 觸發工作流程動畫
            if (entry.target.classList.contains('workflow-step')) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
            
            // 觸發技術優勢動畫
            if (entry.target.classList.contains('advantage-item')) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateX(0)';
            }
            
            // 觸發團隊價值觀動畫
            if (entry.target.classList.contains('team-value')) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'scale(1)';
            }
        }
    });
}, observerOptions);

// 觀察所有需要動畫的元素
document.addEventListener('DOMContentLoaded', () => {
    // 觀察統計數據
    const statItems = document.querySelectorAll('.stat-item');
    statItems.forEach(el => observer.observe(el));
    
    // 觀察工作流程
    const workflowSteps = document.querySelectorAll('.workflow-step');
    workflowSteps.forEach(el => observer.observe(el));
    
    // 觀察技術優勢
    const advantageItems = document.querySelectorAll('.advantage-item');
    advantageItems.forEach(el => observer.observe(el));
    
    // 觀察性能圖表
    const performanceChart = document.querySelector('.performance-chart');
    if (performanceChart) observer.observe(performanceChart);
    
    // 觀察團隊價值觀
    const teamValues = document.querySelectorAll('.team-value');
    teamValues.forEach(el => observer.observe(el));
    
    // 觀察其他動畫元素
    const animatedElements = document.querySelectorAll('.fade-in-up, .slide-in-left, .slide-in-right, .slide-in-up, .hover-lift');
    animatedElements.forEach(el => observer.observe(el));
});
</script>

<script>
// 添加按鈕點擊追蹤和反饋
document.addEventListener('DOMContentLoaded', () => {
    // 智能文檔跳轉處理
    function setupDocsNavigation() {
        const getCurrentLang = () => localStorage.getItem('lang') || 'zh-tw';
        
        // 主要文檔連結
        document.querySelectorAll('.docs-link, #hero-docs-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const lang = getCurrentLang();
                const url = lang === 'en' ? '/docs/md/en/README' : '/docs/md/zh-tw/README';
                window.location.href = url;
            });
        });
        
        // API 文檔連結
        document.querySelectorAll('.api-docs-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const lang = getCurrentLang();
                const url = lang === 'en' ? '/docs/md/en/api' : '/docs/md/zh-tw/api';
                window.location.href = url;
            });
        });
        
        // 部署指南連結
        document.querySelectorAll('.deployment-docs-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const lang = getCurrentLang();
                const url = lang === 'en' ? '/docs/md/en/deployment' : '/docs/md/zh-tw/deployment';
                window.location.href = url;
            });
        });
        
        // 開發者指南連結
        document.querySelectorAll('.developer-docs-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const lang = getCurrentLang();
                const url = lang === 'en' ? '/docs/md/en/developer' : '/docs/md/zh-tw/developer';
                window.location.href = url;
            });
        });
    }
    
    // 初始化文檔導航
    setupDocsNavigation();
    
    // 為所有按鈕添加點擊反饋效果
    const buttons = document.querySelectorAll('.btn');
    buttons.forEach(button => {
        // 檢查按鈕是否有有效連結
        if (button.tagName === 'A' && !button.href) {
            console.warn('Button without href found:', button);
            button.href = '#';
            button.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('Button clicked but no valid href:', button.textContent);
            });
        }
        
        // 添加點擊反饋效果
        button.addEventListener('click', function(e) {
            // 創建漣漪效果
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.className = 'ripple';
            
            this.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        });
    });
    
    // 檢查並修復無效連結
    const links = document.querySelectorAll('a[href="#"], a[href=""]');
    links.forEach(link => {
        console.warn('Invalid link found:', link);
        link.addEventListener('click', (e) => {
            e.preventDefault();
            // 根據按鈕內容決定跳轉位置
            const text = link.textContent.toLowerCase();
            if (text.includes('文檔') || text.includes('docs')) {
                window.location.href = '/docs';
            } else if (text.includes('註冊') || text.includes('register')) {
                window.location.href = '/register';
            } else if (text.includes('下載') || text.includes('download')) {
                window.location.href = '/download';
            } else if (text.includes('github')) {
                window.open('https://github.com/him6794/hivemind', '_blank');
            }
        });
    });
});

// 添加 CSS 漣漪效果
const style = document.createElement('style');
style.textContent = `
    .btn {
        position: relative;
        overflow: hidden;
    }
    
    .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        pointer-events: none;
        transform: scale(0);
        animation: ripple-animation 0.6s ease-out;
    }
    
    @keyframes ripple-animation {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
    
    .btn-hover-glow:hover {
        box-shadow: 0 0 20px rgba(var(--bs-primary-rgb), 0.5);
        transform: translateY(-2px);
    }
    
    .btn-hover-lift:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }
    
    .bg-gradient-primary {
        background: linear-gradient(135deg, var(--bs-primary), #0056b3);
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}
